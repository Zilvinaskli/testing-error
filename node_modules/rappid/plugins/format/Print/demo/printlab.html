<!DOCTYPE html>
<html>
<head>
    <meta charset="utf8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">

    <title>Print Lab</title>

    <link rel="stylesheet" type="text/css" href="../../../../build/rappid.css">

    <style>

        html, body {
            margin: 0;
            padding: 0;
        }

        /*DEBUG*/
        .printarea {
            border: 4px solid red;
            box-sizing: border-box;
            -moz-box-sizing: border-box;
        }

        td {
            border-bottom: 1px solid gray;
        }

        td.header {
            color: forestgreen;
            font-weight: bold;
        }

        .td-opt {
            width: 350px;
            font-family: monospace;
        }

    </style>

</head>
<body>

</body>

<!-- Dependencies: -->
<script src="../../../../node_modules/jquery/dist/jquery.js"></script>
<script src="../../../../node_modules/lodash/lodash.js"></script>
<script src="../../../../node_modules/backbone/backbone.js"></script>

<script src="../../../../build/rappid.js"></script>

<script type="text/javascript">

    var createPaper = function(name) {

        var a = $('<div/>').css('display', 'inline-block').text(name).appendTo(document.body);
        var graph = new joint.dia.Graph();
        return new joint.dia.Paper({
            el: $('<div/>').css('margin-right', 10).appendTo(a),
            width: 400,
            height: 250,
            gridSize: 80,
            drawGrid: { name: 'mesh', args: { color: COLORS_B[_.random(0, COLORS_B.length - 1)] }},
            model: graph
        }).scale(0.1);
    };

    var COLORS_B = ['#263238', '#37474f', '#546e7a', '#607d8b', '#78909c', '#90a4ae', '#cfd8dc', '#0d47a1', '#33691e', '#bf360c'];

    var shape = function(x, y, size) {
        return new joint.shapes.basic.Rect({
            position: { x: x, y: y },
            size: { width: size, height: size },
            attrs: {
                rect: {
                    fill: COLORS_B[_.random(0, COLORS_B.length - 1)],
                    stroke: '#b0bec5',
                    strokeWidth: 1
                }
            }
        });
    };

    var processPrint = function(index, opt) {
        papers[index].print(opt);
    };

    var papers = [

        createPaper('Paper 1 (small) ~100px X 100px'),
        createPaper('Paper 2 (bigger) ~1500px X 1500px')
    ];

    var createTextRow = function(dest, text, css) {
        var tr = $('<tr/>');
        tr.append($('<td/>', { class: 'header', colspan: papers.length + 1, text: text }).css(css || {}));
        dest.append(tr);
    };

    var createrow = function(dest, opt, message) {

        var button;
        var i;
        var n = papers.length;
        var tr = $('<tr/>');

        var text = typeof opt === 'string' ? opt : JSON.stringify(opt);
        $('<td/>', { text: text, class: 'td-opt' }).appendTo(tr);
        for (i = 0; i < n; i++) {
            button = $('<button/>', { text: 'print' });

            tr.append(
                $('<td/>').append(
                    button.clone().on('click', processPrint.bind(this, i, opt))
                )
            );
        }
        tr.append($('<td/>', { text: message || '' }));
        dest.append(tr);
    };

    $('<div/>').appendTo(document.body);

    var table = $('<table/>');

    table.append($('<tr/>')
        .append($('<th/>').text('print options'))
        .append($('<th/>').attr('width', '100').text('Paper 1 - 100x100px'))
        .append($('<th/>').attr('width', '100').text('Paper 2 - 1500x1500px'))
    );
    createrow(table, 'Defaults');
    createrow(table, { margin: 0 });

    createTextRow(table, 'A5 - NO MARGIN', { color: 'limegreen' });
    createrow(table, { margin: 0, sheet: { width: 148, height: 210 }}, 'Portrait');
    createrow(table, { margin: 0, sheet: { width: 210, height: 148 }}, 'Landscape');
    createrow(table, { margin: 0, sheet: { width: 148, height: 210 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Portrait + area');
    createrow(table, { margin: 0, sheet: { width: 210, height: 148 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Landscape + area');
    createTextRow(table, 'A5 - MARGIN 0.4inch', { color: 'limegreen' });
    createrow(table, { margin: 0.4, sheet: { width: 148, height: 210 }}, 'Portrait + margin ');
    createrow(table, { margin: 0.4, sheet: { width: 210, height: 148 }}, 'Landscape + margin');
    createrow(table, { margin: 0.4, sheet: { width: 148, height: 210 }, poster: { rows: 2, columns: 2 }}, 'Portrait + margin + poster');
    createrow(table, { margin: 1, sheet: { width: 210, height: 148 }, poster: { rows: 2, columns: 2 }}, 'Landscape + margin + poster');

    createTextRow(table, 'A4 - NO MARGIN');
    createrow(table, { margin: 0, sheet: { width: 210, height: 297 }}, 'Portrait');
    createrow(table, { margin: 0, sheet: { width: 297, height: 210 }}, 'Landscape');
    createrow(table, { margin: 0, sheet: { width: 210, height: 297 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Portrait + area');
    createrow(table, { margin: 0, sheet: { width: 297, height: 210 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Landscape + area');
    createTextRow(table, 'A4 - MARGIN 0.4inch');
    createrow(table, { margin: 0.4, sheet: { width: 210, height: 297 }}, 'Portrait + margin ');
    createrow(table, { margin: 0.4, sheet: { width: 297, height: 210 }}, 'Landscape + margin');
    createrow(table, { margin: 0.4, sheet: { width: 210, height: 297 }, poster: { rows: 2, columns: 2 }}, 'Portrait + margin + poster');
    createrow(table, { margin: 0.4, sheet: { width: 297, height: 210 }, poster: { rows: 2, columns: 2 }}, 'Landscape + margin + poster');

    createTextRow(table, 'A3 - NO MARGIN', { color: 'limegreen' });
    createrow(table, { margin: 0, sheet: { width: 297, height: 420 }}, 'Portrait');
    createrow(table, { margin: 0, sheet: { width: 420, height: 297 }}, 'Landscape');
    createrow(table, { margin: 0, sheet: { width: 297, height: 420 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Portrait + area');
    createrow(table, { margin: 0, sheet: { width: 420, height: 297 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Landscape + area');
    createTextRow(table, 'A3 - MARGIN 0.4inch', { color: 'limegreen' });
    createrow(table, { margin: 0.4, sheet: { width: 297, height: 420 }}, 'Portrait + margin ');
    createrow(table, { margin: 0.4, sheet: { width: 420, height: 297 }}, 'Landscape + margin');
    createrow(table, { margin: 0.4, sheet: { width: 297, height: 420 }, poster: { rows: 2, columns: 2 }}, 'Portrait + margin + poster');
    createrow(table, { margin: 0.4, sheet: { width: 420, height: 297 }, poster: { rows: 2, columns: 2 }}, 'Landscape + margin + poster');

    createTextRow(table, 'A0 - NO MARGIN');
    createrow(table, { margin: 0, sheet: { width: 841, height: 1189 }}, 'Portrait');
    createrow(table, { margin: 0, sheet: { width: 1189, height: 841 }}, 'Landscape');
    createrow(table, { margin: 0, sheet: { width: 841, height: 1189 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Portrait + area');
    createrow(table, { margin: 0, sheet: { width: 1189, height: 841 }, area: {x: 10, y: 10, width: 200, height: 100}}, 'Landscape + area');
    createTextRow(table, 'A0 - MARGIN 0.4inch');
    createrow(table, { margin: 0.4, sheet: { width: 841, height: 1189 }}, 'Portrait + margin ');
    createrow(table, { margin: 0.4, sheet: { width: 1189, height: 841 }}, 'Landscape + margin');
    createrow(table, { margin: 0.4, sheet: { width: 841, height: 1189 }, poster: { rows: 2, columns: 2 }}, 'Portrait + margin + poster');
    createrow(table, { margin: 0.4, sheet: { width: 1189, height: 841 }, poster: { rows: 2, columns: 2 }}, 'Landscape + margin + poster');

    table.appendTo(document.body);

    papers[0].model.resetCells([shape(10, 10, 100)]);
    papers[1].model.resetCells([shape(10, 10, 600), shape(1000, 1000, 600), shape(10, 1000, 600), shape(1000, 10, 600)]);

</script>


</html>
